\documentclass{article}

\usepackage{amsmath}
\usepackage[utf8]{inputenc}
\usepackage{mathabx}
\usepackage{amsthm}
\usepackage{enumitem}
\usepackage{bm}
\usepackage{upgreek}

\theoremstyle{definition} % by default it is "plain" which will italicize the body
\newtheorem{theorem}{Theorem}[section] % will be numbered section.theorem

\theoremstyle{definition}
\newtheorem{corollary}{Corollary}[section] % will be numbered section.theorem.corollary
% \newtheorem{corollary}{Corollary}[theorem] % will be numbered section.theorem.corollary

\theoremstyle{definition}
\newtheorem{lemma}{Lemma}[section]

\newcommand{\tot}{\upphi}

% \newtheorem{lemma}[theorem]{Lemma} % will follow the numbering as if it is a theorem.
% So after theorem 1.2 comes lemma 1.3

\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]

\counterwithin*{equation}{section}

\title{Summary for ``Elementary Number Theory: Second Edition by Underwood Dudley"}
\date{2019-07-08}
\author{Agro Rachmatullah}

\begin{document}
  \pagenumbering{gobble}
  \maketitle
  
  \newpage
  \pagenumbering{arabic}
  \section{Integers}
  
  \begin{definition}[Least-integer principle]
  A nonempty set of integers that is bounded below contains a smallest element.
  \end{definition}
  
  \subparagraph{Example} The set $\{4, 5, 6\}$ has 4 as the smallest element. The set $\{10, 12, 14, \dots\}$ has 10 as the smallest element.
  
  \begin{definition}[Greatest-integer principle]
  A nonempty set of integers that is bounded above contains a largest element.
  \end{definition}
  
  \subparagraph{Example} The set $\{4, 5, 6\}$ has 6 as the largest element. The set $\{1\}$ has 1 as the largest element.
  
  \begin{definition}
  $a$ divides $b$ (written $a \divides b$) if and only if there is an integer $d$ such that $ad = b$.
  
  \subparagraph{Examples} $3 \divides 6$, $15 \divides 60$, $9 \divides 9$, $-4 \divides 16$, and $2 \divides -100$.
  \end{definition}
  
  \begin{definition}
  If $a$ does not divide $b$, we write $a \notdivides b$.
  
  \subparagraph{Examples} $10 \notdivides 5$ and $3 \notdivides 7$.
  \end{definition}
  
  \begin{lemma}
    If $d \divides a$ and $d \divides b$, then $d \divides (a + b)$.
  \end{lemma}
  
  \subparagraph{Example} $2 \divides 4$ and $2 \divides 10$, so $2 \divides 14$.
  
  \begin{proof}
    From the definition, we know that there are integers $q$ and $r$ such that
    
    \[ dq = a \;\;\;\text{and}\;\;\; dr = b \]
    
    Thus
    
    \[ a + b = d(q + r) \]
    
    so from the definition again, $d \divides (a + b)$.
  \end{proof}
  
  \begin{lemma}
    If $d \divides a_1$, $d \divides a_2$, $\dots$ $d \divides a_n$, then $d \divides (c_1a_1 + c_2a_2 + \dots + c_na_n)$ for any integers $c_1, c_2, \dots, c_n$
  \end{lemma}
  
  \subparagraph{Example} $2 \cdot 6 + 4 \cdot 9 = 12 + 36 = 48$. Because $3 \divides 6$ and $3 \divides 9$, we conclude that $3 \divides 48$.
  
  \begin{definition}
    $d$ is the greatest common divisor of $a$ and $b$ (written $d = (a, b)$) if and only if
    
    \begin{enumerate}[label=(\roman*)]
      \item $d \divides a$ and $d \divides b$, and
    
      \item if $c \divides a$ and $c \divides b$, then $c \le d$
    \end{enumerate}
  \end{definition}
  
  \subparagraph{Examples} $(2, 6) = 2$ and $(5, 7) = 1$.
  
  \begin{theorem}
    If $(a, b) = d$, then $(a / d, b / d) = 1$.
  \end{theorem}
  
  \subparagraph{Examples} \ 
  
  $(16, 20) = 4$, so $(16 / 4, 20 / 4) = (4, 5) = 1$
  
  $(12, 6) = 3$, so $(12 / 3, 6 / 3) = (4, 2) = 2$
  
  \begin{proof}
    Suppose that $c = (a / d, b / d)$. If follows that $c \divides (a / d)$ and $c \divides (b / d)$. Therefore there are
    integers $q$ and $r$ such that $cq = a / d$ and $cr = b / d$. That is,
    
      \begin{equation*}
        (cd)q = a \;\;\text{and}\;\; (cd)r = b
      \end{equation*}
    
    which means $cd$ is a divisor of both $a$ and $b$. Because $(a, b) = d$, it must be the case that $cd \leq d$.
    $d$ is positive so $c \leq 1$.
    
    Because $c = (a / d, b / d)$, it follows that $c \geq 1$. Therefore $c = 1$.
  \end{proof}
  
  \begin{definition}
    If $(a, b) = 1$, then we will say that $a$ and $b$ are \textbf{relatively prime}.
  \end{definition}
  
  \subparagraph{Examples} $(4, 5) = 1$, so 4 and 5 are relatively prime. 10 and 7 are also relatively prime.
  
  \begin{theorem}[The Division Algorithm]
    \label{th:division_algorithm} Given positive integers $a$ and $b$, $b \neq 0$, there exist unique integers
    $q$ and $r$, with $0 \leq r < b$ such that
    
    \begin{equation*}
      a = bq + r
    \end{equation*}
  \end{theorem}
  
  \subparagraph{Example} With $a = 17$ and $b = 5$, we have $17 = 5 \cdot 3 + 2$
  
  \begin{proof}
    Consider the set of integers $\{a, a - b, a - 2b, a - 3b, \dots, a - qb\}$ bounded below by 0.
    It contains members that are nonnegative and nonempty (because at least $a$ is a member).
    From the least-integer principle, it contains a smallest element $a - qb$.
    
    The smallest element must be less than $b$, because if not the smallest element in the set would have
    to be $a - (q + 1)b$.
    
    Ler $r = a - qb$. It follows that $a = bq + r$ and we only have to show that $q$ and $r$ are unique.
    
    Suppose that we have found $q$, $r$ and $q_1$, $r_1$ such that $a = bq + r = bq_1 + r_1$ with
    $0 \leq r < b$ and $0 \leq r_1 < b$. Subtracting, we get
    
    \begin{align*}
      0 &= b(q - q_1) + (r - r_1) \\
      b(q_1 - q) &= r - r_1
    \end{align*}
    
    Since $b$ divides the left side of the equation, it follows that $b \divides r - r_1$.
    
    Because $0 \leq r_1 < b$, we have $-b < -r_1 \leq 0$. We also have $0 \leq r < b$, so it follows that
    
    \begin{equation*}
      -b < r - r_1 < b
    \end{equation*}
    
    Since the only number in that range divisible by $b$ is 0, $r - r_1 = 0$ which implies $q - q_1 = 0$.
    Hence the numbers $q$ and $r$ in the theorem is unique.
  \end{proof}
  
  \begin{lemma}
    If $a = bq + r$, then $(a, b) = (b, r)$.
  \end{lemma}
  
  \begin{proof}
    Let $d = (a, b)$. Because $d \divides a$ and $d \divides b$, we know from $a = bq + r$ that $d \divides r$.
    Therefore, $d$ is a common divisor of $b$ and $r$. It remains to show that $d$ is not just any common
    divisor but in fact the greatest common divisor.
    
    Now let us assume that $c$ is a common divisor of $b$ and $r$, so $c \divides b$ and $c \divides r$.
    From the equation $a = bq + r$, we know that $c \divides a$. So $c$ is common divisor of both
    $a$ and $b$. Because $(a, b) = d$, it must be the case that $c \leq d$.
    
    Since $d$ is a common divisor of $b$ and $r$, and for any common divisor $c$ we have $c \leq d$,
    we have proven that $(b, r) = d$.
  \end{proof}
  
  \begin{theorem}[The Eucledian Algorithm]
    If $a$ and $b$ are positive integers, $b \ne 0$, and
    
    \begin{align*}
      a &= bq + r,         &0 &\leq r < b, \\
      b &= rq_1 + r_1, &0 &\leq r_1 < r, \\
      r &= r_1q_2 + r_2, &0 &\leq r_2 < r_1 \\
      \cdot & &. \\
      \cdot & &. \\
      \cdot & &. \\
      r_k &= r_{k+1}q_{k+2} + r_{k+2}, &0 &\leq r_{k+2} < r_{k+1}
    \end{align*}
    
    then for $k$ large enough, say $k = t - 1$, we have
    
    \begin{equation*}
      r_{t - 1} = r_tq_{t+1}
    \end{equation*}
    
    and $(a, b) = r_t$.
  \end{theorem}
  
  \begin{proof}
    The sequence
    
    \begin{equation*}
      b > r > r_1 > r_2 > \dots
    \end{equation*}
    
    is decreasing, and we know that they are nonnegative, so we will eventually reach 0. Suppose $r_{t+1} = 0$.
    Then we have $r_{t - 1} = r_tq_{t+1}$. If we apply Lemma 3 over and over,
    
    \begin{equation*}
      (a, b) = (b, r) = (r, r_1) = (r_1, r_2) = \dots = (r_{t-1}, r_t) = r_t
    \end{equation*}
  \end{proof}
  
  \begin{theorem}
    If $(a, b) = d$, then there are integers $x$ and $y$ such that
    
    \begin{equation*}
      ax + by = d
    \end{equation*}
    \label{th:gcd_to_linear}
  \end{theorem}
  
  \begin{proof}
    Let us assume that $a$ and $b$ are positive integers with $a \geq b$ and $b \neq 0$.
    We can always switch the order of $a$ and $b$, and if $b = 0$ then the proof is trivial.
    
    If $(a, b) = b$, then $a \cdot 0 + b \cdot 1 = b$ so the equation is true with $x = 0$ and $y = 1$.
    
    For $d < b$, then $d$ will be one of the remainders in the set of equations from Theorem 3.
    If we call the remainders $r_0, r_1, \dots$ then we can rewrite the equations as
    
    \begin{align*}
      r_0 &= a - bq \\
      r_1 &= b - r_0q_1 \\
      r_2 &= r_0 - r_1q_2 \\
      &\dots \\
      r_n &= r_{n-2} - r_{n-1}q_n
    \end{align*}
    
    For the base case of $r_0$ and $r_1$, it is easy to confirm that they can be written as
    $ax + by$.
    
    Now, assuming that $r_{n-2} = ax + by$ and $r_{n-1} = ax' + by'$, then
    
    \begin{align*}
      r_n &= r_{n-2} - r_{n-1}q_n \\
      &= ax + by - q_n(ax' + by') \\
      &= a(x - q_nx') + b(y - q_ny')
    \end{align*}
    
    Because the base case and inductive case is proven, it is proved for all $r_n$.
    
    If one or both of $a$ and $b$ are negative, we can use the property $(a, b) = (-a, b) = (a, -b) = (-a, -b)$.
    We can also switch the order such that $a \geq b$ as required by the beginning of the proof.
  \end{proof}
  
  \begin{corollary}
    If $d \divides ab$ and $(d, a) = 1$, then $d \divides b$.
    \label{cor:must_divide_one_of_them}
  \end{corollary}
  
  \begin{proof}
    Because $d$ and $a$ is relatively prime, we have
    
    \begin{align*}
      dx + ay &= 1 \\
      d(bx) + (ab)y &= b
    \end{align*}
    
    Because the left side is divisible by $d$, we conclude that $d \divides b$.
  \end{proof}
  
  \begin{corollary}
    Let $(a, b) = d$, and suppose that $c \divides a$ and $c \divides b$.
    Then $c \divides d$.
  \end{corollary}
  
  \subparagraph{Examples} $(18, 12) = 6$, and 3 is a common divisor
  of both 18 and 12. Thus by the corollary $3 \divides 6$.
  
  \begin{proof}
    We know that there are integers $x$ and $y$ such that
    
    \begin{equation*}
      ax + by = d
    \end{equation*}
    
    Because $c \divides ax$ and $c \divides by$, $c$ divides the right hand side too.
  \end{proof}
  
  \begin{corollary}
    If $a \divides m$, $b \divides m$, and $(a, b) = 1$, then $ab \divides m$.
  \end{corollary}
  
  \subparagraph{Examples} $3 \divides 30$, $5 \divides 30$, and $(3, 5) = 1$. Thus $3 \cdot 5 = 15 \divides 30$.
  
  \begin{proof}
    $b \divides m$ means there is an integer $q$ such that $m = bq$.
    Since $a \divides m$, we have $a \divides bq$.
    
    However since $(a, b) = 1$, from Corollary 1 we know that $a \divides q$. Therefore
    there is an integer $r$ such that $q = ar$, so $m = bar = (ab) r$. Thus $ab \divides m$.
  \end{proof}
  
  \section{Unique Factorization}
  
  \begin{definition}
    A \textbf{prime} is an integer that is greater than 1 and has no positive divisors other than 1 and itself.
  \end{definition}
  
  \subparagraph{Examples} 2, 3, 5, 7 and 11 are primes.
  
  \begin{definition}
    An integer that is greater than 1 but is not prime is called \textbf{composite}.
  \end{definition}
  
  \subparagraph{Examples} 4 is a composite because it is divisible by 2. 10 is a composite because it
  has 2 and 5 as its divisor.
  
  \begin{definition}
    1 is neither a prime nor composite. We will call 1 a \textbf{unit}.
  \end{definition}
  
  \begin{lemma}
    Every integer $n$, $n > 1$, is divisible by a prime.
    \label{lem:n_is_divisible_by_prime}
  \end{lemma}
  
  \begin{proof}
    Consider the set of all divisors of $n$ larger than 1 and smaller than $n$ itself. If it is empty,
    then $n$ is a prime which means that it is divisible by a prime (namely itself).
    
    If it is nonempty, then by the least integer principle it has a smallest divisor, say $p$. If $p$
    is not a prime, then it has divisor $q > 1$ but smaller than itself. However $q$ must divide
    $n$ which is a contradiction because $p$ is supposed to be the smallest in the set. Therefore
    $p$ is a prime, and $n$ has a prime divisor which is $p$.
  \end{proof}
  
  \begin{proof}
    (By induction) The lemma is true by inspection for $n = 2$. Suppose it is true for $n \leq k$. Then either
    $k + 1$ is prime, in which case we are done, or it is divisible by some number $k_1$ with
    $k_1 \leq k$. But from the induction assumption, $k_1$ is divisible by a prime, and this prime
    also divides $k + 1$. Again, we are done.
  \end{proof}
  
  \begin{lemma}
    Every integer $n$, $n > 1$, can be written as a product of primes.
    \label{lem:integer_is_a_product_of_primes}
  \end{lemma}
  
  \begin{proof}
    From Lemma 1, we know that there is a prime $p_1$ such that $p_1 \divides n$. That is, $n = p_1n_1$,
    where $1 \leq n_1 < n$. If $n_1 = 1$, then we are done: $n = p_1$ is an expression of $n$ as a products of
    primes. If $n_1 > 1$, then from Lemma 1 again, there is a prime that divides $n_1$. That is, $n_1 = p_2n_2$,
    where $p_2$ is a prime and $1 \leq n_2 < n_1$. If $n_2 = 1$, again we are done: $n = p_1p_2$ is written as a 
    product of primes. But if $n_2 > 1$, then Lemma 1 once again says that $n_2 = p_3n_3$, with $p_3$ a prime
    and $1 \leq n_3 < n_2$. If $n_3 = 1$, we are done. If not we continue. We will sooner or later come to one of the
    $n_i$ equal to 1, because $n > n_1 > n_2 > \dots$ and each $n$, is positive; such a sequence cannot continue forever.
    For some $k$, we will have $n_k = 1$, in which case $n = p_1p_2 \cdots p_k$ is the desired expression of n as
    a product of primes. Note that the same prime may occur several times in the product.
  \end{proof}
  
  \begin{theorem}[Euclid]
    There are infinitely many primes.
  \end{theorem}
  
  \begin{proof}
    Suppose not. Then there are only finitely many primes. Denote them by $p_1, p_2, \dots, p_r$. Consider
    the integer
    
    \begin{equation}
      n = p_1p_2\cdots p_r + 1
      \label{eq:new_prime}
    \end{equation}
    
    From Lemma 1, we see that $n$ is divisible by a prime, and since there are only finitely many primes, it
    must be one of $p_1, p_2, \dots, p_r$. Suppose that it is $p_k$. Then since
    
    \begin{equation*}
      p_k \divides n \;\;\text{and}\;\; p_k \divides p_1p_2\cdots p_r\;\text{,}
    \end{equation*}
    
    it divides two of the terms in (\ref{eq:new_prime}). Consequently it divides the other term in (\ref{eq:new_prime}); thus $p_k \divides 1$.
    This is nonsense: no primes divide 1 because all are greater than 1. This contradiction shows that
    we started with an incorrect assumption. Since there cannot be only finitely many primes, there
    are infinitely many.
  \end{proof}
  
  \begin{lemma}
    If $n$ is composite, then it has divisor $d$ such that $1 < d \leq n^\frac{1}{2}$.
    \label{lem:has_divisor_leq_sqrt}
  \end{lemma}
  
  \begin{proof}
    Since $n$ is composite, there are integers $d_1$ and $d_2$ such that $d_1d_2 = n$
    and $1 < d_1 < n$, $1 < d_2 < n$. If $d_1$ and $d_2$ are both larger than $n^\frac{1}{2}$,
    then
    
    \begin{equation*}
      n = d_1d_2 > n^\frac{1}{2} n^\frac{1}{2} = n
    \end{equation*}
  \end{proof}
  
  which is impossible. Thus, one of $d_1$ and $d_2$ must be less than or equal to $n^\frac{1}{2}$.
  
  \begin{lemma}
    If $n$ is composite, then it has a prime divisor less than or equal to $n^\frac{1}{2}$.
  \end{lemma}
  
  \begin{proof}
    We know from Lemma \ref{lem:has_divisor_leq_sqrt} that $n$ has a divisor---call it d---such that $1 < d \leq n^\frac{1}{2}$.
    From Lemma \ref{lem:n_is_divisible_by_prime}, we know that $d$ has a prime divisor $p$. Since $p \leq d \leq n^\frac{1}{2}$,
    the lemma is proved.
  \end{proof}
  
  \begin{lemma}
    If $p$ is a prime and $p \divides ab$, then $p \divides a$ or $b \divides b$.
    \label{lem:prime_must_divide_one_of_two}
  \end{lemma}
  
  \subparagraph{Examples} $2 \divides 4 \cdot 3$, so 2 must either divide 4 or 3.
  Indeed, $2 \divides 4$.
  
  \subparagraph{} The same couldn't be said if the divisor is not a prime. For example, even though
  $4 \divides 2 \cdot 6$, 4 doesn't divide either 2 nor 6.
  
  \begin{proof}
    Since $p$ is prime, its only positive divisors are 1 and $p$. Thus $(p, a) = p$ or
    $(p, a) = 1$. In the first case, $p \divides \bm{a}$, and we are done. In the second case,
    Corollary \ref{cor:must_divide_one_of_them} tells us that $p \divides \bm{b}$, and again we are done.
  \end{proof}
  
  \begin{lemma}
    If $p$ is a prime and $p \divides a_1a_2\cdots a_k$, then $p \divides a_i$ for some $i$, $i = 1, 2, \dots, k$.
    \label{lem:prime_must_divide_one_of_them_k}
  \end{lemma}
  
  \begin{proof}
    Lemma \ref{lem:prime_must_divide_one_of_them_k} is true by inspection if $k = 1$, and
    Lemma \ref{lem:prime_must_divide_one_of_two} shows that it is true if $k = 2$. We will proceed by induction.
    Suppose that Lemma \ref{lem:prime_must_divide_one_of_them_k} is true for $k = r$. Suppose that
    $p \divides a_1a_2\cdots a_{r+1}$. The $p \divides a_1a_2\cdots a_r$ or $p \divides a_{r + 1}$. In the
    first case, the induction assumption tells us that $p \divides a_i$ for some $i$, $i = 1, 2, \dots, r$. In the
    second case, $p \divides a_i$ for $i = r + 1$. In either case, $p \divides a_i$ for some $i$, $i =1, 2, \dots, r + 1$.
    Thus, if the lemma is true for $k = r$, it is true for $k = r + 1$, and since it is true for $k = 1$ and $k = 2$, it is
    true for any positive integer $k$.
  \end{proof}
  
  \begin{lemma}
    If $p, q_1, q_2, \dots, q_n$ are primes, and $p \divides q_1q_2\cdots q_n$, then $p = q_k$ for some $k$.
    \label{lem:prime_must_be_one_of_them}
  \end{lemma}
  
  \begin{proof}
    From Lemma \ref{lem:prime_must_divide_one_of_them_k} we know that $p \divides q_k$ for some $k$.
    Since $p$ and $q_k$ are primes, $p = q_k$. (The only positive divisors of $q_k$ are 1 and $q_k$, and
    $p$ is not 1.)
  \end{proof}
  
  \begin{theorem}[The Unique Factorization Theorem]
    Any positive integer can be written as a product of primes in one and only one way.
  \end{theorem}
  
  \begin{proof}
    Recall that we agreed to consider as identical all factorizations that differ only in the order of the factors.
    
    We know already from Lemma \ref{lem:integer_is_a_product_of_primes} that any integer $n$, $n > 1$
    can be written as a product of primes. Thus to complete the proof of the theorem, we need to show
    that $n$ cannot have two such representations. That is, if
    
    \begin{equation}
      n = p_1p_2\cdots p_m \;\;\text{and}\;\; n = q_1q_2\cdots q_r
      \label{eq:different_prime_factors}
    \end{equation}
    
    then we must show that the same primes appear in each product, and the same number of times,
    though their order may be different. That is, we must show that the integer $p_1, p_2, \dots, p_m$
    are just a rearrangement of the integers $q_1q_2, \dots, q_r$. From (\ref{eq:different_prime_factors})
    we see that since $p_1 \divides n$,
    
    \begin{equation*}
      p_1 \divides q_1q_2\cdots q_r
    \end{equation*}
    
    From Lemma \ref{lem:prime_must_be_one_of_them}, it follows that $p_1 = q_i$ for some $i$.
    If we divide
    
    \begin{equation*}
      p_1p_2\cdots p_m = q_1q_2\cdots q_r
    \end{equation*}
    
    by the common factor, we have
    
    \begin{equation}
      p_2p_3\cdots p_m = q_1q_2\cdots q_{i-1}q_{i+1}\cdots q_r\;\text{.}
      \label{eq:factorization_divided_once}
    \end{equation}
    
    Because $p_2$ divides the left-hand side of this equation, it also divides the right-hand side.
    Applying Lemma \ref{lem:prime_must_be_one_of_them} again, it follows that $p_2 = q_j$
    for some $j$ ($j = 1, 2, \dots, i - 1, i + 1, \dotsm n$). Cancel this factor from both sides of
    (\ref{eq:factorization_divided_once}), and continue the process. Eventually we will find that
    each $p$ is a $q$. We cannot run out of $q$'s before all the $p$'s are gone, because we would
    then have a product of primes equal to 1, which is impossible. If we repeat the argument with
    the $p$'s and $q$'s interchanged, we see that each $q$ is a $p$. Thus the numbers $p_1,
    p_2, \dots, p_m$ are rearrangement of $q_1, q_2, \dots q_r$ and the two factorizations differ only in the
    order of the factors.
  \end{proof}
  
  \begin{proof}
    (Induction) The theorem is true, by inspection, for $n = 2$. Suppose that it is true for $n \leq k$.
    Suppose that $k + 1$ has two representations:
    
    \begin{equation*}
      k + 1 = p_1p_2\cdots p_m = q_1q_2\cdots q_r\;\text{.}
    \end{equation*}
    
    As in the last proof, $p_1 = q_i$ for some $i$, so
    
    \begin{equation*}
      p_2p_3\cdots p_m = q_1q_2\cdots q_{i-1}q_{i+1}\cdots q_r\;\text{.}
    \end{equation*}
    
    But this number is less than or equal to $k$, and by the induction assumption, its prime decomposition
    is unique. Hence the integers $q_1, q_2, \dots, q_{i-1}, q_{i + 1}, \dots, q_r$ are a rearrangement of
    $p_2, p_3, \dots, p_m$, and since $p_1 = q_i$ the proof is complete.
  \end{proof}
  
  \begin{definition}
    From the unique factorization theorem it follows that each positive integer can be written in exactly
    one way in the form
    
    \begin{equation*}
      n = p_1^{e_1}p_2^{e_2}\cdots p_k^{e_k}
    \end{equation*}
    
     where $e_i \geq 1, i = 1, 2, \dots, k$, each $p_i$ is a prime, and $p_i \neq p_j$ for $i \neq j$.
     We call this representation the \textbf{prime-power decomposition} of $n$,
  \end{definition}
  
  \begin{theorem}
    If $e_1 \geq 0$, $f_1 \geq 0$, $(i = 1, 2, \dots k)$,
    
    \begin{equation*}
      m = p_1^{e_1}p_2^{e_2}\cdots p_k^{e_k} \;\;\text{and}\;\; n = p_1^{f_1}p_2^{f_2}\cdots p_k^{f_k}\;\text{,}
    \end{equation*}
    
    then
    
    \begin{equation*}
      (m, n) = p_1^{g_1}p_2^{g_2}\cdots p_k^{g_k}
    \end{equation*}
    
    where $g = \text{min}(e_i,f_i)$, $i = 1, 2, \dots k$
  \end{theorem}
  
  \section{Linear Diophantine Equations}
  
  \begin{definition}
    Equations in which we look for solutions in a restricted class of numbers\textemdash be they positive
    integers, negative integers, rational numbers, or whatever\textemdash are called \textbf{diophantine
    equations}.
  \end{definition}
  
  \subparagraph{Example} $x^2 + y^2 = z^2$ where we look for solutions in integers. One such solution
  is $x = 3$, $y = 4$, $z = 5$.
  
  \begin{lemma}
    If $x_0, y_0$ is a solutions of $ax + by = c$, then so is
    
    \begin{equation*}
      x_0 + bt, y_0 - at
    \end{equation*}
    
    for any integer $t$.
  \end{lemma}
  
  \subparagraph{Example} $x + 2y = 4$ has $x = 0, y = 2$ as one of its solution. If we set $t = 2$, then
  
  \begin{align*}
    x &= 0 + 2 \cdot 2 = 4 \\
    y &= 2 - 1 \cdot 2 = 0
  \end{align*}
  
  is also a solution for the diophantine equation.
  
  \begin{proof}
    We are given that $ax_0 + by_0 = c$. Thus
    
    \begin{align*}
      a(x_0 + bt) + b(y_0 - at) &= ax_0 + abt + by_0 - bat \\
      &= ax_0 + by_0 \\
      &= c
    \end{align*}
    
    so $x_0 + bt, y_0 - at$ satisfies the equation too.
  \end{proof}
  
  \begin{lemma}
    If $(a, b) \not\divides c$. then $ax + by = c$ has no solutions, and if $(a, b) \divides c$, then
    $ax + by = c$ has a solution.
  \end{lemma}
  
  \subparagraph{Example} The equation $2x + 4y = 5$ has no solution because $(2, 4) = 2 \not\divides 5$.
  
  \begin{proof}
    Suppose that there are integers $x_0, y_0$ such that $ax_0 + by_0 = c$, Since $(a, b) \divides ax_0$ and
    $(a, b) \divides by_0$, it follows that $(a, b) \divides c$. Conversely, suppose that $(a, b) \divides c$.
    Then $c = m(a, b)$ for some $m$. From Theorem \ref{th:gcd_to_linear}, we know that there are integers $r$ and $s$ such that
    
    \begin{equation*}
      ar + bs = (a, b)
    \end{equation*}
    
    Then
    
    \begin{equation*}
      a(rm) + b(sm) = m(a, b) = c
    \end{equation*}
    
    and $x = rm, y = sm$ is a solution.
  \end{proof}
  
  \begin{lemma}
    Suppose that $(a, b) = 1$ and $x_0, y_0$ is a solution of $ax + by = c$. Then all solutions of $ax + by = c$ are
    given by
    
    \begin{align*}
      x &= x_0 + bt \\
      y &= y_0 - at
    \end{align*}
    
    where $t$ is an integer.
  \end{lemma}
  
  \begin{proof}
    We see from Lemma 2 that the equation does have a solution, because $(a, b) = 1$ and $1 \divides c$ for all
    $c$. Then, let $r, s$ be \textit{any} solution of $ax + by = c$. We want to show that $r = x_0 + bt$ and
    $s = y_0 - at$ for some integer $t$. From $ax_0 + by_0 = c$ follows
    
    \begin{equation*}
      c - c = (ax_0 + by_0) - (ar + bs)
    \end{equation*}
    
    or
    
    \begin{equation}
      a(x_0 - r) + b(y_0 - s) = 0
      \label{eq:0697C052_6EA0_41C8_B3CB_348A6DA20C28}
    \end{equation}
    
    Because $a \divides a(x_0 - r)$ and $a \divides 0$, we have $a \divides b(y_0 - s)$. But we have supposed that
    $a$ and $b$ are relatively prime. It follows from Corollary 1.1 that $a \divides y_0 - s$. That is, there is an integer
    $t$ such that
    
    \begin{equation}
      at = y_0 - s
      \label{eq:4229D1AA_9738_411C_AC87_33474E7DF1D4}
    \end{equation}
    
    Substituting in (\ref{eq:0697C052_6EA0_41C8_B3CB_348A6DA20C28}), this gives
    
    \begin{equation*}
      a(x_0 - r) + bat = 0
    \end{equation*}
    
    Because $a \neq 0$, we may cancel it to get
    
    \begin{equation}
      x_0 - r + bt = 0
      \label{eq:2B9C5726_F9C3_49DA_A9D6_6B42D1E4246D}
    \end{equation}
    
    But (\ref{eq:4229D1AA_9738_411C_AC87_33474E7DF1D4}) and (\ref{eq:2B9C5726_F9C3_49DA_A9D6_6B42D1E4246D}) say that
    
    \begin{align*}
      s &= y_0 - at \\
      r &= x_0 + bt
    \end{align*}
    
    Since $r, s$ was \textit{any} solution, the lemma is proved.
  \end{proof}
  
  \begin{theorem}
    The linear diophantine equation $ax + by = c$ has no solutions if $(a, b) \not\divides c$. If $(a, b) \divides c$, there are
    infinitely many solutions
    
    \begin{equation*}
      x = r + \frac{b}{(a, b)}t,\;\;\;y = s - \frac{a}{(a, b)}t
    \end{equation*}
    
    where $r$, $s$ is any solution and $t$ is an integer.
  \end{theorem}
  
  \section{Congruences}
  
  \begin{definition}
    We say that $a$ is \textbf{congruent} to $b$ modulo $m$ (in symbols, $a \equiv b \pmod{m}$) if and only if $m \divides (a - b)$
    and we will suppose always that $m > 0$.
  \end{definition}
  
  \begin{theorem}
    $a \equiv b \pmod{b}$ if and only if there is an integer $k$ such that $a = b + km$.
  \end{theorem}
  
  \begin{proof}
    Suppose that $a \equiv b \pmod{b}$. Then, from the definition of congruence, $m \divides (a - b)$. From the definition of
    divisibility, we know that since there is an integer $k$ such that $km = a - b$, then $a = b + km$.
    
    Conversely, suppose that $a = b + km$. Then $a - b = km$, which means that $(a - b)$ is divisible by $m$. But that is exactly the definition
    of $a \equiv b \pmod{b}$.
  \end{proof}
  
  \begin{theorem}
    Every integer is congruent (mod $m$) to exactly one of $0, 1, \dots, m - 1$.
  \end{theorem}
  
  \begin{proof}
    Write $a = qm + r$, with $0 \leq r < m$. We know from Theorem \ref{th:division_algorithm} that $q$ and $r$ are uniquely determined.
    Since $a \equiv r \pmod{m}$, the theorem is proved.
  \end{proof}
  
  \begin{definition}
    The number $r$ in the last theorem is called the \textbf{least residue} of $a$ (mod $m$).
  \end{definition}
  
  \begin{theorem}
    $a \equiv b \pmod{m}$ if and only if $a$ and $b$ leave the same remainder on division by $m$.
  \end{theorem}
  
  \begin{proof}
    If $a$ and $b$ leave the same remainder $r$ when divided by $m$, then
    
    \begin{equation*}
      a = q_1m + r \;\;\text{and}\;\; b = q_2m + r
    \end{equation*}
    
    for some integers $q_1$ and $q_2$. It follows that
    
    \begin{equation*}
      a - b = (q_1m + r) - (q_2m + r) = m(q_1 - q_2)
    \end{equation*}
    
    From the definition of divisibility, we have $m \divides (a - b)$. From the definition of congruence, we conclude that
    $a \equiv b \pmod{m}$. To prove the converse, suppose that $a \equiv b \pmod{m}$. Then
    $a \equiv b \equiv r \pmod{m}$, where $r$ is a least residue modulo $m$. Then from Theorem 1,
    
    \begin{equation*}
      a = q_1m + r \;\;\text{and}\;\; b = q_2m + r
    \end{equation*}
    
    for some integers $q_1$ and $q_2$; since $0 \leq r < m$, the theorem is proved.
  \end{proof}
  
  \begin{lemma}
    For integers $a$, $b$, $c$, and $d$
    \begin{enumerate}[label=\alph*)]
      \item $a \equiv a \pmod{m}$.
      \item If $a \equiv b \pmod{m}$, then $b \equiv a \pmod{m}$.
      \item If $a \equiv b \pmod{m}$ and $b \equiv c \pmod{m}$, then $a \equiv c \pmod{m}$.
      \item If $a \equiv b \pmod{m}$ and $c \equiv d \pmod{m}$, then $a + c \equiv b + d \pmod{m}$.
      \item If $a \equiv b \pmod{m}$ and $c \equiv d \pmod{m}$, then $ac \equiv bd \pmod{m}$.
    \end{enumerate}
  \end{lemma}
  
  \begin{proof}
    ~
  \end{proof}
  
  \begin{enumerate}[label=\alph*)]
    \item $a - a = 0 = m \cdot 0$, so $m \divides (a - a)$, which means $a \equiv a \pmod{m}$.
    \item We are given $a - b = km$, so $b - a = (-k)m$, which means $b \equiv a \pmod{m}$.
    \item The first condition means that $a$ and $b$ leaves the same remainder $r_1$ when divided by $m$.
      The second means that $b$ and $c$ leaves the same remainder $r_2$ when divided by $m$.
      Because both $r_1$ and $r_2$ are the remainders when $b$ is divided by $m$, $r_1 = r_2$.
      Thus $a$ and $c$ has the same remainder when divided by $m$, or $a \equiv c \pmod{m}$.
    \item We are given that $a - b = km$ and $c - d = jm$ for some integers $k$ and $j$; thus
    
    \begin{align*}
      (a + c) - (b + d) &= (a - b) + (c - d) \\
        &= km - jm \\
        &= m(k - j)
    \end{align*}
    
    from the definition of congruence, $a + c \equiv b + d \pmod{m}$.
    
    \item We are given that $b - a = km$ and $d - c = jm$ for some integers $k$ and $j$; thus
    
    \begin{align*}
      ac - bd &= ac - (a + km)(c + jm) \\
        &= ac - ac - ajm - ckm - kjm^2 \\
        &= m (-aj -ck - kjm)
    \end{align*}
    
    from the definition of congruence, $ac \equiv bd \pmod{m}$.
  \end{enumerate}
  
  \begin{theorem}
    If $ac \equiv bc \pmod{m}$ and $(c, m) = 1$, then $a \equiv b \pmod{m}$.
  \end{theorem}
  
  \begin{proof}
    From the definition of congruence, $m \divides (ac - bc)$; consequently, $m \divides c(a - b)$.
    Because $(m, c) = 1$, we can conlude from Theorem 5 of Section 1 that $m \divides (a - b)$.
    That is, $a \equiv b \pmod{m}$.
  \end{proof}
  
  \begin{theorem}
    If $ac \equiv bc \pmod{m}$ and $(c, m) = d$, then $a \equiv b \pmod{m/d}$.
  \end{theorem}
  
  \begin{proof}
    If $ac \equiv bc \pmod{m}$, then $m \divides c(a - b)$ and $m/d \divides (c/d)(a - b)$.
    Since we know that $(m/d, c/d) = 1$, from Theorem 5 of Section 1 we get $m/d \divides (a - b)$,
    so $a \equiv b \pmod{m/d}$.
  \end{proof}
  
  \begin{theorem}
    Every integer is congruent $\pmod{9}$ to the sum of its digits.
  \end{theorem}
  
  \begin{proof}
    Take an integer $n$, and let its digital representation be

    \[ d_kd_{k-1}d_{k-2}\dots d_1d_0 \]

    That is,
    
    \begin{align*}
      n &= d_k10^k + d_{k-1}10^{k-1} + d_{k-2}10^{k-2} + \dots + d_1 10^1 + d_0 10^0 \\
        &\equiv d_k + d_{k-1} + d_{k-2} + \dots + d_0 \pmod{9}
    \end{align*}
  \end{proof}
  
  \section{Linear Congruences}
  
  \begin{definition}
    A solution to $ax \equiv b \pmod{m}$ is a number $r$ such that $ar \equiv b \pmod{m}$
    and $r$ is a least residue (mod $m$). There might be no solutions, exactly one solution,
    or many solutions.
  \end{definition}
  
  \begin{lemma}
    If $(a, m) \not\divides b$, then $ax \equiv b \pmod{m}$ has no solutions.
  \end{lemma}
  
  \begin{proof}
    We will prove the contrapositive, which is logically the same thing: if $ax \equiv b \pmod{m}$
    has a solution, then $(a, m) \divides b$. Suppose that $r$ is a solution. Then $ar \equiv b \pmod{m}$,
    and from the definition of congruence, $m \divides (ar - b)$, or from the definition of divides,
    $ar - b = km$ for some $k$. Since $(a, m) \divides a$ and $(a, )m \divides km$, it follows that
    $(a, m) \divides b$.
  \end{proof}
  
  \begin{lemma}
    If $(a, m) = 1$, then $ax \equiv b \pmod{m}$ has exactly one solution.
  \end{lemma}
  
  \begin{proof}
    Since $(a, m) = 1$, we know that there are integers $r$ and $s$ such that $ar + ms = 1$.
    Multiplying by $b$ gives
    
    \[ a(rb) + m(sb) = b \]
    
    Which means
    
    \[ a(rb) \equiv b \pmod{m} \]
    
    The least residue of $rb$ modulo $m$ is then a solution of the linear congruence.
    
    It remains to show that there is not more than one solution. Suppose that both $r$ and $s$
    are solutions. That is, since
    
    \[ ar \equiv b \pmod{m} \;\;\;\text{and}\;\;\; as \equiv b \pmod{m} \]
    
    Then $ar \equiv as \pmod{m}$. Because $(a, m) = 1$, we can apply Theorem 4 of the last section,
    cancel the common factor, and get $r \equiv s \pmod{m}$. That is, $m \divides (r - s)$. But $r$
    and $s$ are least residues (mod $m$), so
    
    \[ 0 \leq r < m \;\;\;and\;\;\; 0 \leq s < m \]
    
    Thus $-m < r - s < m$; together with $m \divides (r - s)$, this gives $r - s = 0$, or $r = s$, and
    the solution is unique.
  \end{proof}
  
  \begin{lemma}
    Let $d = (a, m)$. If $d \divides b$, then $ax \equiv b \pmod{m}$ has exactly $d$ solutions.
  \end{lemma}
  
  \begin{proof}
    If we cancel the common factor, we get a congruence $(a/d)x \equiv (b/d)\pmod{m/d}$,
    which we know has exactly one solution, because $(a/d, m/d) = 1$. Call it $r$,
    and let $s$ be any other solution of $ax \equiv b \pmod{m}$. Then $ar \equiv as \equiv b
    \pmod{m}$, and it follows from Theorem 5 of the last section that $r \equiv s \pmod{m/d}$.
    That is, $s - r = k(m/d)$ or $s = r + k(m/d)$ for some $k$. Putting $k = 0, 1, \dots, d - 1$,
    we get $0 \leq k(m/d) \leq (d-1)(m/d)$. Combined with $0 \leq r < m/d$, we conclude that
    $s$ are numbers which are least residues (mod $m$), since
    
    \[ 0 \leq r + k(m/d) < (m/d) + (d-1)(m/d) = m \]
    
    and they all satisfy $ax \equiv b \pmod{m}$, because
    
    \[ (a/d)(r + k(m/d)) \equiv (a/d)r \equiv b/d \pmod{m/d} \]
    
    and this implies (by definition of congruence and multiplying both sides by $d$)
    
    \[ a(r + k(m/d)) \equiv b \pmod{m} \]
  \end{proof}
  
  \begin{theorem}
    $ax \equiv b \pmod{m}$ has no solutions if $(a, m) \not\divides b$. If $(a, m) \divides b$,
    then there are exactly $(a, m)$ solutions.
  \end{theorem}
  
  \begin{proof}
    This is just a summary of the previous three lemmas.
  \end{proof}
  
  \begin{theorem}[The Chinese Remainder Theorem]
    The system of congruences
    
    \begin{equation} x \equiv a_i \pmod{m_i}, i = 1, 2, \dots, k \label{eq:chinese_remainder}\end{equation}
    
    where $(m_i, m_j) = 1$ if $i \neq j$, has a unique solution modulo $m_1m_2\cdots m_k$.
  \end{theorem}
  
  \begin{proof}
    We first show, by induction, that the system (\ref{eq:chinese_remainder}) has a solution. The result
    is obvious when $k = 1$. Let us consider the case $k = 2$. If $x \equiv a_1 \pmod{m_1}$, then
    $x = a_1 + k_1m_1$ for some $k_1$. If in addition $x \equiv a_2 \pmod{m_2}$, then
    
    \[ a_1 + k_1m_1 \equiv a_2 \pmod{m_2} \]
    
    or
    
    \[ k_1m_1 \equiv a_2 - a_1 \pmod{m_2} \]
    
    Because $(m_2, m_1) = 1$, we know that this congruence, with $k_1$ as the unknown, has a unique
    solution modulo $m_2$. Call it $t$. Then $k_1 = t + k_2m_2$ for some $k_2$, and
    
    \[ x = a_1 + (t + k_2m_2)m_1 \equiv a_1 + tm_1 \pmod{m_1m_2} \]
    
    satisfies both congruences.
    
    Suppose that system (\ref{eq:chinese_remainder}) has a solution (mod $m_1m_2\dots m_k$) for
    $k = r - 1$. Then there is a solution, $s$, to the system
    
    \[ x \equiv a_i\pmod{m_i}, i = 1, 2, \dots, r - 1 \]
    
    But the system
    
    \[ x \equiv s \pmod{m_1m_2\cdots m_{r-1}}\]
    
    \[ x\equiv a_r \pmod{m_r} \]
    
    has a solution modulo the product of the moduli, just as in the case $k = 2$, because
    $(m_1m_2\cdots m_{k-1}, m_k) = 1$. (This statement is true because no prime that
    divides $m_i, i = 1, 2, \dots, k-1$, can divide $m_k$)
    
    It is easy to see that the solution is unique. If $r$ and $s$ are both solutions of the
    system, then
    
    \[ r \equiv s \equiv a_i \pmod{m_i}, i = 1, 2, \dots, k \]
    
    So $m_i \divides (r - s), i = 1, 2, \dots, k$ Thus $r - s$ is a common multiple of
    $m_1, m_2, \dots, m_k$, and because the moduli are relatively prime in pairs,
    we have $m_1m_2\cdots m_k \divides (r - s)$. But since $r$ and $s$ are
    least residues modulo $m_1m_2\cdots m_k$,
    
    \[ -m_1m_2\cdots m_k < r - s < m_1m_2\cdots m_k \]
    
    whence $r - s = 0$.
  \end{proof}
  
  \section{Fermat's and Wilson's Theorems}
  
  \begin{lemma}
    If $(a, m) = 1$, then the least residues of
    
    \begin{equation}
      a, 2a, 3a, \dots, (m - 1)a \pmod{m}
    \end{equation}
    
    are
    
    \begin{equation}
      1, 2, 3, \dots, m - 1
    \end{equation}
    
    is some order.
  \end{lemma}
  
  \subparagraph{Example} For $m = 8$ and $a = 3$, the numbers in (1) are
  
  \[ 3, 6, 9, 12, 15, 18, 21 \]
  
  and their least residues (mod 8) are
  
  \[ 3, 6, 1, 4, 7, 2, 5 \]
  
  \begin{proof}
    There are $m - 1$ numbers in (1), none congruent to 0 (mod $m$). Hence
    each of them is congruent (mod $m$) to one of the numbers in (2).
    If we show that no two of the integers in (1) are congruent (mod $m$), then
    it follows that their least residues (mod $m$) are all different, and hence are
    a permutation of $1, 2, \dots, m - 1$.
    
    Suppose that two of the integers in (1) are congruent (mod $m$): that is,
    
    \[ ra \equiv sa \pmod{m} \]
    
    Because (a, m) = 1 we can cancel (Theorem 4.4) and get
    
    \[ r \equiv s \pmod{m} \]
    
    But $r$ and $s$ are least residues modulo $m$; by argument we have used
    several times before, it follows that $r = s$.
  \end{proof}
  
  \begin{theorem}[Fermat's Theorem]
    If $p$ is prime and $(a, p) = 1$,
    
    \[ a^{p - 1} \equiv 1 \pmod{p} \]
  \end{theorem}
  
  \subparagraph{Example} For $p = 5$ and $a = 2$, we have $a^4 = 16
    \equiv 1 \pmod{5}$.
    
  \begin{proof}
    Given any prime $p$, Lemma 1 says that if $(a, p) = 1$, then the
    least residues of
    
    \[ a, 2a, \dots, (p - 1)a \pmod{p} \]
    
    are a permutation of
    
    \[ 1, 2, \dots, p - 1. \]
    
    Hence their products are congruent (mod $p$):
    
    \[ a \cdot 2a \cdot 3a \cdots (p - 1)a \equiv 1 \cdot 2 \cdot 3 \cdots (p - 1) \pmod{p} \]
    
    or
    
    \[ a^{p - 1}(p - 1)! = (p - 1)! \pmod{p} \]
    
    Since $p$ and $(p - 1)!$ are relatively prime, the last congruence gives
    
    \[ a^{p - 1} \equiv 1 \pmod{p} \]
  \end{proof}
  
  \begin{corollary}
    If $p$ is a prime, then
    
    \[ a^p \equiv a \pmod{p} \]
    
    for all $a$.
  \end{corollary}
  
  \begin{proof}
    If $(a, p) = 1$, this follows from Fermat's Theorem. If $(a, p) = p$, then the corollary
    says $0 = 0 \pmod{p}$, which is true. There are no other cases.
  \end{proof}
  
  \begin{lemma}
    $x^2 \equiv 1 \pmod{p}$ has exactly two solutions: 1 and $p - 1$.
  \end{lemma}
  
  \begin{proof}
    Let $r$ be any solution of $x^2 \equiv 1 \pmod{p}$. By solution we mean, as we did
    for linear congruences, a least residue that satisfies the congruence. We have
    $r^2 - 1 \equiv 0 \pmod{p}$, so
    
    \[ p \divides (r + 1)(r - 1) \]
    
    hence $p \divides (r + 1)$ or $p \divides (r - 1)$; otherwise expressed,
    
    \[ r + 1 \equiv 0 \;\;\text{or}\;\; r -1 \equiv 0 \pmod{p}, \]
    
    so $r \equiv p - 1$ or $1$ (mod $p$). Since $r$ is a least residue (mod $p$),
    it follows that $r = p - 1$ or 1. It is easy to verify that both of these numbers
    actually satisfy $x^2 \equiv 1 \pmod{p}$.
  \end{proof}
  
  \begin{lemma}
    Let $p$ be an odd prime and let $a'$ be the solution of $ax \equiv 1 \pmod{p}$,
    $a = 1, 2, \dots, p -1$. $a' \equiv b' \pmod{p}$ if and only if $a \equiv b \pmod{p}$.
    Furthermore, $a \equiv a' \pmod{p}$ if and only if $a = 1$ or $p - 1$.
  \end{lemma}
  
  \subparagraph{Example} For $p = 13$ we have
  
  \begin{center}
    \begin{tabular}{ l | r r r r r r r r r r r r }
      $a$  & 1 & 2 & 3 &  4 &  5 & 6  & 7  & 8 & 9 & 10 & 11 & 12  \\
      $a'$ & 1 & 7 & 9 & 10 & 8 & 11 & 2 & 5 & 3 & 4 & 6 & 12
    \end{tabular}
  \end{center}
  
  Note that the bottom row does not have duplicate entries, which means
  $a' \equiv b' \pmod{p}$ if and only if $a \equiv b \pmod{p}$.
  
  \begin{proof}
    Suppose that $a' \equiv b' \pmod{p}$. Then
    
    \[ b \equiv aa'b \equiv ab'b \equiv a \pmod{p} \]
    
    Conversely, suppose that $a \equiv b \pmod{p}$. Then
    
    \[ b' \equiv b'aa' \equiv b'ba' \equiv a' \pmod{p}. \]
    
    For the second part of the proof, it follows from $1 \cdot 1 \equiv (p - 1)(p - 1)
    \equiv 1 \pmod{p}$ that $1' \equiv 1 \pod{p}$ and $(p - 1)' \equiv p - 1 \pmod{p}$.
    Conversely, if $a \equiv a' \pmod{p}$, then $1 \equiv aa' \equiv a^2 \pmod{p}$, and
    from Lemma 2 we know that this is possible only if $a = 1$ or $p - 1$.
  \end{proof}
  
  \begin{theorem}[Wilson's Theorem]
    $p$ is a prime if and only if
    
    \[ (p - 1)! \equiv -1 \pmod{p} \]
  \end{theorem}
  
  \subparagraph{Example} For the prime $p = 5$, we have
  
  \[ (p - 1)! = 4! = 4 \cdot 3 \cdot 2 \cdot 1 = 24 \equiv -1 \pmod{p} \]
  
  \begin{proof}
    From Lemma 3, we know that we can separate the numbers
    
    \[ 2, 3, \dots p - 2 \]
    into $(p - 3) / 2$ pairs such that each pair consists of an integer
    $a$ and its associated $a'$, which is different from $a$. For example,
    for $p = 13$ the pairs are
    
    \[ (2, 7), (3, 9), (4, 10), (5, 8), (6, 11) \]
    
    The product of the two integers in each pair is congruent to 1 (mod $p$),
    so it follows that
    
    \[ 2 \cdot 3 \cdot (p - 2) \equiv 1 \pmod{p}. \]
    
    Hence
    
    \[ (p - 1)! \equiv 1 \cdot 2 \cdot 3 \cdots (p - 2)(p-1) \equiv 1 \cdot 1 \cdot (p - 1) \equiv -1 \pmod{p} \]
    
    and we have proved half of the theorem. It remains to prove the other half and show that if
    
    \begin{equation}
      (n - 1)! \equiv -1 \pmod{n},
    \end{equation}
    
    then $n$ is a prime. Suppose that $n = ab$ for some integers $a$ and $b$, with $a \neq n$. From (3), we have
    
    \[ n \divides (n - 1)! + 1, \]
    
    and since $a \divides n$, we have
    
    \begin{equation}
      a \divides (n - 1)! + 1
    \end{equation}
    
    But since $a \leq n - 1$, it follows that one of the factors of $(n - 1)!$ is $a$ itself. Thus
    
    \begin{equation}
      a \divides (n - 1)!
    \end{equation}
    
    But (4) and (5) imply that $a \divides 1$. Hence the only positive divisors of $n$ are 1 and
    $n$, and thus $n$ is a prime.
  \end{proof}
  
  \section{The Divisors of an Integer}
  
  TODO
  
  \section{Perfect Numbers}
  
  TODO
  
  \section{Euler's Theorem and Function}
  
  \begin{definition}
    If $m$ is a positive integer, let $\tot(m)$ denote the number of positive integers
    less than or equal to $m$ and relatively prime to $m$. We will call $\tot$
    \textbf{Euler's $\tot$-function (totient function)}.
  \end{definition}
  
  \subparagraph{Example} $\tot(6) = 2$ because 1 and 5 are the only two numbers less than
  or equal to 6 that are relatively prime to 6.
  
  $\tot(10) = 4$ because 1, 3, 7, and 9 are the only four numbers less than
  or equal to 10 that are relatively prime to 10.
  
  \begin{lemma}
    If $(a, m) = 1$ and $r_1, r_2, \dots, r_{\tot(m)}$ are the positive integers less than $m$ and
    relatively prime to $m$, then the least residues (mod $m$) of
    
    \begin{equation}
      ar_1, ar_2, \dots, ar_{\tot(m)}
    \end{equation}
    
    are a permutation of
    
    \begin{equation*}
      r_1, r_2, \dots, r_{\tot(m)}
    \end{equation*}
  \end{lemma}
  
  \subparagraph{Example} With $m = 10$ and $a = 3$, the least residues of $3 \cdot 1,
  3 \cdot 3, 3 \cdot 7, 3 \cdot 9$ are $3, 9, 1, 7$ which is a permutation of $1, 3, 7, 9$.
  
  \begin{proof}
    Since there are exactly $\tot(m)$ numbers in the set (1), to prove that their least
    residues are a permutation of the $\tot(m)$ numbers $r_1, r_2, \dots, r_{\tot(m)}$
    we need to show that they are all different and that they are all relatively prime to $m$.
    To show that they are all different, suppose that
    
    \begin{equation*}
      ar_i \equiv ar_j \pmod{m}
    \end{equation*}
    
    for some $i$ and $j$ ($1 \leq i \leq \tot(m)$, $1 \leq j \leq \tot(m)$). Since $(a, m) = 1$,
    we can cancel $a$ from both sides of the congruence to get $r_i \equiv r_j \pmod{m}$.
    Since $r_i$ and $r_j$ are least residues (mod $m$), it follows that $r_i = r_j$. Hence
    $r_i \neq r_j$ implies $ar_i \nequiv ar_j \pmod{m}$, so the numbers in (1) are all different.
    
    To prove that all the number is (1) are relatively prime to $m$, suppose that $p$ is a prime
    common divisor of $ar_i$ and $m$ for some $i$, $1 \leq i \leq \tot(m)$. Since $p$ is prime,
    either $p \divides a$ or $p \divides r_i$. Thus either $p$ is a common divisor of $a$ and $m$
    or of $r_i$ and $m$. But $(a, m) = (r_i, m) = 1$, so both cases are impossible. Therefore
    $(ar_i, m) = 1$ for each $i$, $i = 1, 2, \dots, \tot(m)$.
  \end{proof}
  
  \begin{theorem}
    Suppose that $m \geq 1$ and $(a, m) = 1$. Then $a^{\tot(m)} \equiv 1 \pmod{m}$.
  \end{theorem}
  
  \subparagraph{Example} $(3, 8) = 1$ and $\tot(8) = 4$, so $3^4 \equiv 9 \cdot 9 \equiv 1 \cdot 1 \equiv 1 \pmod{8}$.
  
  \begin{proof}
    The theorem is true when $m = p$, a prime. Every positive integer less than $p$
    is relatively prime to it, so $\tot(p) = p - 1$, and by Fermat's Theorem $a^{p - 1} \equiv 1
    \pmod{p}$ when $(a, p) = 1$.
    
    The theorem is also true for $m = 1$, since the definition of $\tot$ gives $\tot(1) = 1$,
    and $a^1 \equiv 1 \equiv 0 \pmod{1}$ for any integer $a$.
    
    More generally, for $m \neq 1$, we know from Lemma 1 that
    
    \begin{align*}
      r_1r_2\cdots r_{\tot(m)} &\equiv (ar_1)(ar_2)\cdots (ar_{\tot(m)}) \\
      &\equiv a^{\tot(m)}(r_1r_2\cdots r_{\tot(m)}) \pmod{m}
    \end{align*}
    
    Because each of $r_1, r_2, \dots, r_{\tot(m)}$ is relatively prime to $m$, their product is also.
    Thus that factor may be canceled in the last congruence, and we get
    
    \[ 1 \equiv a^{\tot(m)} \pmod{m} \]
  \end{proof}
  
  \begin{lemma}
    $\tot(p^n) = p^{n-1}(p - 1)$ for all prime $p$ and positive integers $n$.
    \label{lem:totient_prime}
  \end{lemma}
  
  \subparagraph{Example} $\tot(9) = \tot(3^2) = 3^1\cdot(3-1) = 6$. Indeed there are 6 positive
  numbers less than or equal to 9 which are relatively prime to 9: 1, 2, 4, 5, 7, 8.
  
  \begin{proof}
    The positive integers less than or equal to $p^n$ which are \textit{not} relatively prime
    to $p^n$ are exactly the multiples of $p$:
    
    \[
      1\cdot p, 2\cdot p, 3\cdot p, \dots, (p^{n-1})p,
    \]
    
    and there are $p^{n-1}$ of them. Since there are in all $p^n$ positive integers less than
    or equal to $p^n$, we have
    
    \[
      \tot(p^n) = p^n - p^{n-1} = p^{n - 1}(p - 1)
    \]
  \end{proof}
  
  \begin{lemma}
    If $(a, m) = 1$ and $a \equiv b \pmod{m}$, then $(b, m) = 1$.
  \end{lemma}
  
  \subparagraph{Example} $(3, 4) = 1$ and $3 \equiv 11 \pmod{m}$, so $(11, 4) = 1$.
  
  \begin{proof}
    This follows from the fact that $b = a + km$ for some $k$, so $a = b - km$.
    If $(b, m) = d$ where $d > 1$, then because $d \divides b$ and $d \divides km$,
    it follows that $d \divides a$ which means $(a, m) = d$ which is a contradiction.
  \end{proof}
  
  \begin{corollary}
  If the least residues (mod $m$) of
  
  \begin{equation}
    r_1, r_2, \dots, r_m
  \end{equation}
  
  are a permutation of 0, 1, \dots, m - 1, then (2) contains exactly $\tot(m)$ elements
  relatively prime to $m$.
  \end{corollary}
  
  \begin{theorem}
    $\tot$ is multiplicative.
  \end{theorem}
  
  \subparagraph{Example} Because $(2, 3) = 1$, $\tot(6) = \tot(2\dot 3) = \tot(2)\tot(3) = 2$.
  Indeed the only two numbers less than or equal to 6 and is relatively prime to 6 are 1 and 5.
  
  \begin{proof}
    Suppose that $(m, n) = 1$ and write the numbers from 1 to $mn$ as follows:
    
    \begin{equation*}
    \begin{matrix}
      1 & m + 1 & 2m + 1 & \dots & (n-1)m + 1 \\
      2 & m + 2 & 2m + 2 & \dots & (n-1)m + 2 \\
         &           &  \vdots         &           \\
      m & 2m & 3m & \dots & mn
    \end{matrix}
    \end{equation*}
    
    Suppose that $(m, r) = d$ and $d > 1$. Then we claim that no element in
    the $r$-th row of the array:
    
    \begin{equation*}
    \begin{matrix}
      r & m + r & 2m + r & \dots & km + r  & \dots & (n-1)m + r
    \end{matrix}
    \end{equation*}
    
    is relatively prime to $mn$. This is so because if $d \divides m$ and
    $d \divides r$, then $d \divides (km + r)$ for any $k$. So, if we are looking
    for numbers that are relatively prime to $mn$, we will not find any except
    in those rows whose first element is relatively prime to $m$. There are
    $\tot(m)$ rows in total.
    
    Suppose we can show that there are exactly $\tot(n)$ numbers relatively
    prime to $mn$ in each of the rows that have first elements relatively prime
    to $m$. Since there are $\tot(m)$ such rows, it will follow that the number
    of integers in the whole array that are relatively prime to $mn$ is
    $\tot(m)\tot(n)$: that is, $\tot(mn) = \tot(m)\tot(n)$, and the theorem will
    be proved. But the numbers in the $r$-th row (where $r$ and $m$ are
    relatively prime) are
    
    \begin{equation}
    \begin{matrix}
      r & m + r & 2m + r & \dots & km + r  & \dots & (n-1)m + r
    \end{matrix}
    \end{equation}
    
    and we claim that their least residues (mod $n$) are a permutation of
    
    \begin{equation}
      0, 1, 2, \dots, (n-1)
    \end{equation}
    
    To verify this claim, all we have to do is show that no two of the numbers
    in (3) are congruent (mod $n$), because (3) contains $n$ elements, just
    as (4) does. This is easy. suppose that
    
    \[
      km + r \equiv jm + r \pmod{n}
    \]
    
    with $0 \leq k < n$ and $0 \leq j < n$. Then $km \equiv jm \pmod{n}$, and
    since $(m, n) = 1$, we have $k \equiv j \pmod{n}$. On account of the inequalities
    on $k$ and $j$, it follows that $k = j$. Hence if $k \neq j$, then $km + r \nequiv jm + r \pmod{n}$,
    and no two elements of (3) are congruent (mod $n$).
    
    By the Corollary to Lemma 3, we have that (3) contains exactly $\tot(n)$ elements relatively
    prime to $n$. But from Lemma 3, every element in the $r$-th row of the array is
    relatively prime to $m$. It follows that the $r$-th row of the array contains exactly
    $\tot(n)$ elements relatively prime to $mn$. As noted, this completes the proof.
  \end{proof}
  
  \begin{theorem}
    If $n$ has a prime-power decomposition given by
    
    \[ n = p_1^{e_1} p_2^{e_2} \cdots p_k^{e_k} \]
    
    then
    
    \[ \tot(n) = p_1^{e_1-1}(p_1-1)p_2^{e_2-1}(p_2-1)\cdots p_k^{e_k-1}(p_k-1) \]
  \end{theorem}
  
  \subparagraph{Example} $\tot(72) = \tot(2^3 \cdot 3^2) = \tot(2^3)\tot(3^2) = 2^2 \cdot 1 \cdot 3^1 \cdot 2 = 24$
  
  \begin{proof}
    Because $\tot$ is multiplicative, Theorem 5 of Section 7 applies here to give
    
    \[ \tot(n) = \tot(p_1^{e_1})\tot(p_2^{e_2})\cdots \tot(p_k^{e_k}) \]
    
    If we apply Lemma \ref{lem:totient_prime} to each term on the right, the theorem is proved.
  \end{proof}
  
  \begin{corollary}
    If $n = p_1^{e_1} p_2^{e_2} \cdots p_k^{e_k}$, then
    
    \[ \tot(n) = n\left( 1 - \frac{1}{p_1}\right) \left(1 - \frac{1}{p_2}\right)\cdots\left(1 - \frac{1}{p_k}\right) \]
  \end{corollary}
  
  \subparagraph{Example} $\tot(72) = \tot(2^3 \cdot 3^2) = 72(1 - \frac{1}{2})(1 - \frac{1}{3}) = 72\cdot\frac{1}{2}\cdot\frac{2}{3}
  = \frac{72}{6} = 12$
  
  \begin{proof}
    \begin{align*}
      \tot(n) &= \left[p_1^{e_1-1}(p_1-1)\right] \left[p_2^{e_2-1}(p_2-1)\right] \cdots \left[p_k^{e_k-1}(p_k-1)\right] \\
        &= \left[p_1^{e_1}\left(1-\frac{1}{p_1}\right)\right] \left[p_2^{e_2}\left(1-\frac{1}{p_2}\right)\right] \cdots \left[p_k^{e_k}\left(1-\frac{1}{p_k}\right)\right] \\
        &= p_1^{e_1} p_2^{e_2} \cdots p_k^{e_k} \left( 1 - \frac{1}{p_1}\right) \left(1 - \frac{1}{p_2}\right)\cdots\left(1 - \frac{1}{p_k}\right) \\
        &= n\left( 1 - \frac{1}{p_1}\right) \left(1 - \frac{1}{p_2}\right)\cdots\left(1 - \frac{1}{p_k}\right)
    \end{align*}
  \end{proof}
  
  \begin{theorem}
    If $n \geq 1$, then
    
    \[ \sum_{d \divides n}\tot(d) = n \]
  \end{theorem}
  
  \subparagraph{Example} The divisors of 8 are 1, 2, 4, and 8.
  
  \[ \sum_{d \divides 8}\tot(d) = \tot(1) + \tot(2) + \tot(4) + \tot(8) = 1 + 1 + 2 + 4 = 8 \]
  
  \begin{proof}
    The proof is first thought by Gauss. Consider the integers 1, 2, \dots, $n$. We will put one of
    these integers in class $C_d$ if and only if its greatest common divisor with $n$ is $d$.
    For example, if $n = 12$, we have
    
    \begin{align*}
      C_1 &= \{1, 5, 7, 11\},& C_2 &= \{2, 10\}, \\
      C_3 &= \{3, 9\},& C_4 &= \{4, 8\}, \\
      C_5 &= \{6\},& C_6 &= \{12\}.
    \end{align*}
    
    We have $m$ in $C_d$ if and only if $(m, n) = d$. But $(m, n) = d$ if and only if
    $(m/d, n/d) = 1$. That is, an integer $m$ is in class $C_d$ if and only if $m/d$ is
    relatively prime to $n/d$. The number of positive integers less than or equal to
    $n/d$ and relatively prime to $n/d$ is $\tot(n/d)$ by definition. Thus, the number
    of elements in class $C_d$ is $\tot(n/d)$.
    
    Since there is a class for each divisor of $n$, the total number of elements in all
    the classes $C_d$ is
    
    \[ \sum_{d\divides n}\tot(n/d) \]
    
    That is, $n = \sum_{d\divides n}\tot(n/d)$. But $\sum_{d\divides n}\tot(n/d)$ is
    the same as $\sum_{d\divides n}\tot(n)$, just with the terms in opposite order.
    Thus the theorem is proved.
  \end{proof}
  
  \section{Primitive Roots}
  
  \begin{definition}
    If $(a, m) = 1$, then the \textbf{order} of $a$ modulo $m$ is the smallest positive
    integer $t$ such that $a^t \equiv 1 \pmod{m}$.
  \end{definition}
  
  \subparagraph{Example} 10 has order of 2 (mod 11). On the other hand, 2 has order of 10 (mod 11).
  
  \begin{theorem}
    Suppose that $(a, m) = 1$ and $a$ has order $t$ (mod $m$). Then $a^n = 1 \pmod{m}$ if and only if
    $n$ is a multiple of $t$.
  \end{theorem}
  
  \subparagraph{Example} 10 has order of 2 (mod 11), so $10^4$, $10^6$, etc. are all congruent to 1 (mod 11).
  Also we can quickly know that $10^{13}$ is not congruent to 1 (mod 11) because 13 is not a multiple of 2.
  
  \begin{proof}
    Suppose that $n = tq$ for some integer $q$. Then $a^n \equiv a^{tq} \equiv (a^t)^q \equiv 1 \pmod{m}$
    because $a^t \equiv 1 \pmod{m}$.
    
    Conversely, suppose that $a^n \equiv 1 \pmod{m}$. Since $t$ is the smallest positive integer such that
    $a^t \equiv 1 \pmod{m}$, we have $n \geq t$ so we can divide $n$ by $t$ to get $n = tq + r$ with
    $q \geq 1$ and $0 \leq r < t$. Thus
    
    \[ 1 \equiv a^n \equiv a^{tq + r} \equiv (a^t)^q a^r \equiv 1^q a^r \equiv a^r \pmod{m} \]
    
    Since $t$ is the smallest positive integer such that $a^t \equiv 1 \pmod{m}$, $a^r \equiv 1 \pmod{m}$
    with $0 \leq r < t$ is possible only if $r = 0$. Thus $n = tq$ and the theorem is proved.
  \end{proof}
  
  \begin{theorem}
    If $(a, m) = 1$ and $a$ has order $t$ (mod $m$), then $t \divides \tot(m)$.
  \end{theorem}
  
  \subparagraph{Example} $\tot(11) = 10$, so an integer can have order of 1, 2, 5, or 10 (mod 11).
  
  \begin{proof}
    From Euler's extension of Fermat's Theorem we know that $a^{\tot(m)} \equiv 1 \pmod{m}$. From
    Theorem 1, $\tot(m)$ is a multiple of $t$, which is what we wanted to prove.
  \end{proof}
  
  \begin{theorem}
    If $p$ and $q$ are odd primes and $q \divides a^p - 1$, then either $q \divides a - 1$ or $q = 2kp + 1$
    for some integer $k$.
  \end{theorem}
  
  \begin{proof}
    Since $q \divides a^p - 1$, we have $a^p \equiv 1 \pmod{q}$. So by Theorem 1, the order of $a$ (mod $q$)
    is a divisor of $p$. That is, $a$ has order 1 or $p$. If the order of $a$ is 1, then $a^1 \equiv 1 \pmod{q}$,
    so $q \divides a - 1$. If on the other had the order of $a$ is $p$, then by Theorem 2, $p \divides \tot(q)$;
    that is, $p \divides q - 1$. So $q - 1 = rp$ for some integer $r$. Since $p$ and $q$ are odd, $r$ must be even,
    and this completes the proof.
  \end{proof}
  
  \begin{corollary}
    Any divisor of $2^p - 1$ (where $p$ is a prime) is of the form $2kp + 1$.
  \end{corollary}
  
  \begin{proof}
    $2^p - 1$ is odd, so any of its prime factor $q$ must be odd which means the previous theorem apply. However
    $a = 2$ so $q \divides a - 1 = 1$ is nonsensical because $q$ is a prime. Therefore $q = 2kp + 1$ for
    some integer $k$. If $2^p - 1$ has more than one factor (e.g., it is a composite number), then the product
    of any two factors $q_1$ and $q_2$ will be a divisor also. It is in fact
    
    \begin{align*}
      q_1q_2 &= (2k_1p + 1)(2k_2p + 1) \\
        &= 4k_1k_2p^2 + 2k_1p + 2k_2p + 1 \\
        &= 2(2k_1k_2p + k_1 + k2_2)p + 1 \\
        &= 2jp + 1
    \end{align*}
    
    for some integer $j$. The same conclusion will hold for the product of more factors.
    
    1 is the last divisor not covered by the cases above, but it can also be written as $2kp + 1$ with
    $k = 0$. Therefore the statement is proved.
  \end{proof}
  
  \begin{theorem}
    If the order of $a$ (mod $m$) is $t$, then $a^r \equiv a^s \pmod{m}$ if and only if $r \equiv s \pmod{t}$.
  \end{theorem}
  
  \subparagraph{Example} The order of 2 is 3 (mod $7$). Because $2 \equiv 8 \pmod{3}$, $2^2 \equiv 2^8 \pmod{7}$.
    Indeed, $2^8 \equiv 256 \equiv 256 - 210 \equiv 46 - 42 \equiv 4 \pmod{7}$.
  
  \begin{proof}
    Suppose that $a^r \equiv a^s \pmod{m}$. We can suppose that $r \geq s$ with no loss of generality.
    Thus $a^{r - s} \equiv 1 \pmod{m}$, and from Theorem 1, $r - s$ is a multiple of $t$. That, by definition,
    says that $r \equiv s \pmod{t}$.
    
    For the converse, suppose that $r \equiv s \pmod{t}$. Then $r = s + kt$ for some integer $k$, and
    
    \[ a^r = a^{s + kt} = a^s(a^t)^k \equiv a^s \pmod{m} \]
    
    because $a^t \equiv 1 \pmod{m}$.
  \end{proof}
  
  \begin{definition}
    If $a$ is a least residue and the order of $a$ (mod $m$) is $\tot(m)$, then we will say that $a$ is
    a primitive root of $m$.
  \end{definition}
  
  \begin{theorem}
    If $g$ is a primitive root of $m$, then the least residues, modulo $m$, of
    
    \[ g, g^2, \dots, g^{\tot(m)} \]
    
    are a permutation of the $\tot(m)$ positive integers less than $m$ and relatively prime to it.
  \end{theorem}
  
  \subparagraph{Example} 2 is a primitive root of 9, and the powers
  
  \[ 2, 2^2, 2^3, 2^4, 2^5, 2^6 \]
  
  are (mod 9),
  
  \[ 2, 4, 8, 7, 5, 1 \]
  
  Which are exactly the residues relatively prime to 9.
  
  \begin{proof}
    Since $(g, m) = 1$, each power of $g$ is relatively prime to $m$. Moreover, no two powers
    have the same residue, because if $g^j \equiv g^k \pmod{m}$, then from Theorem 4,
    $j \equiv k \pmod{\tot(m)}$. If $j \nequiv k \pmod{\tot(m)}$, $g^j \nequiv g^k \pmod{m}$.
  \end{proof}
  
  \begin{lemma}
    Suppose that $a$ has order $t$ (mod $m$). Then $a^k$ has order $t$ (mod $m$) if and
    only if $(k, t) = 1$.
  \end{lemma}
  
  \subparagraph{Example} 2 has order 10 (mod 11), and the lemma says that $2^k$ has order
  10 if and only if $(k, 10) = 1$; that is, for $k = 1, 3, 7, \text{and}\;9$. The other primitive roots of 11
  are thus $2^3, 2^7, \text{and}\; 2^9$, or 8, 7, and 6.
  
  \begin{proof}
    Suppose that $(k, t) = 1$, and denote the order of $a^k$ by $s$. We have
    
    \[ 1 \equiv (a^t)^k \equiv (a^k)^t \pmod{m}, \]
    
    so from Theorem 1, $s \divides t$. Because $s$ is the order of $a^k$,
    
    \[ (a^k)^s \equiv a^{ks} \equiv 1 \pmod{m}, \]
    
    so from Theorem 1 again, $t \divides ks$. Since $(k, t) = 1$, it follows that
    $t \divides s$. This fact, combined with the fact that $s \divides t$, implies that
    $s = t$.
    
    To prove the converse, suppose that $a$ and $a^k$ have order $t$ and
    that $(k, t) = r$. Then
    
    \[ 1 \equiv a^t \equiv (a^t)^{k / r} = (a^k)^{t / r} \pmod{m} \]
    
    Because $t$ is the order of $a^k$, Theorem 1 says that $t/r$ is
    a multiple of $t$. This impies that $r = 1$.
  \end{proof}
  
  \begin{corollary}
    Suppose that $g$ is a primitive root of a prime $p$. Then the least residue of
    $g^k$ is a primitive root of $p$ if and only if $(k, p - 1) = 1$.
  \end{corollary}
  
  \begin{proof}
    Apply Lemma 1 with $t = p - 1$.
  \end{proof}
  
  \begin{lemma}
    If $f$ is a polynomial of degree $n$ and $p$ is a prime, then
    
    \begin{equation}
      f(x) \equiv 0 \pmod{p} \label{eq:1BCCEB6C-B77A-4DFC-87D8-B38F8C8BF96B}
    \end{equation}
    
    has at most $n$ solutions.
  \end{lemma}
  
  \begin{proof}
    Let
    
    \[ f(x) = a_nx^n + a_{n - 1}x^{n - 1}+\dots+a_0 \]
    
    have degree $n$; that is, $a_n \nequiv 0 \pmod{p}$. We prove the lemma
    by induction. For $n = 1$,
    
    \[ a_1x + a_0 \equiv 0 \pmod{p} \]
    
    has but one solution, since $(a_1, p) = 1$. Suppose that the lemma is true
    for polynomials of degree $n - 1$, and suppose that $f$ has degree $n$.
    Either $f(x) \equiv 0 \pmod{p}$ has no solutions or it has at least one. In the
    first case, the lemma is true. In the second case, suppose that $r$ is a solution.
    That is, $f(r) \equiv 0 \pmod{p}$ and $r$ is a least residue (mod $p$). Then
    because $x - r$ is a factor of $x^t - r^t$ for $t = 0, 1, \dots, n$, we have
    
    \begin{align*}
      f(x) &\equiv f(x) - f(r) \\
        &\equiv a_n(x^n - r^n) + a_{n - 1}(x^{n - 1} - r^{n - 1}) + \dots + a_1(x - r) \\
        &\equiv (x - r)g(x) \pmod{p},
    \end{align*}
    
    where $g$ is a polynomial of degree $n - 1$. Suppose that $s$ is also a solution
    of (\ref{eq:1BCCEB6C-B77A-4DFC-87D8-B38F8C8BF96B}). Thus
    
    \[ f(s) \equiv (s - r)g(s) \equiv 0 \pmod{p} \]
    
    Because $p$ is a prime it follows that
    
    \[ s \equiv r \pmod{p} \;\;\;\text{or}\;\;\; g(s) = 0 \pmod{p} \]
    
    from the induction assumption, the second congruence has at most $n - 1$ solutions.
    Since the first congruence has just one solution, the proof is complete.
  \end{proof}
  
  \begin{lemma}
    If $p$ is a prime and $d \divides p - 1$, then $x^d \equiv 1 \pmod{p}$ has exactly $d$ solutions.
  \end{lemma}
  
  \subparagraph{Example} With $p = 7$, we have $x^6 \equiv 1 \pmod{7}$ for
    $x = 1, 2, \dots, 6$. The divisors of 6 are 1, 2, 3, and 6. The case 1 and 6 are
    trivial. For $x^2 \equiv 1 \pmod{7}$, the only solutions are 1 and 6. For
    $x^3 \equiv 1 \pmod{7}$, the solutions are 1, 2, and 4.
  
  \begin{proof}
    From Fermat's Theorem, the congruence $x^{p - 1} \equiv 1 \pmod{p}$ has exactly
    $p - 1$ solutions, namely $1, 2, ..., p - 1$. Moreover,
    
    \begin{align*}
      x^{p - 1} - 1 &= (x^d - 1)(x^{p-1-d}+x^{p-1-2d}+\dots + x^d+1) \\
        &= (x^d - 1)h(x)
    \end{align*}
    
    From Lemma 2, we know that $h(x) \equiv 0 \pmod{p}$ has at most $p - 1 - d$
    solutions. Hence $x^d \equiv 1 \pmod{p}$ has at least $d$ solutions.
    Applying Lemma 2 again, $x^d \equiv 1 \pmod{p}$ has at most $d$ solutions.
    Therefore it has exactly $d$ solutions.
  \end{proof}
  
  \begin{theorem}
    Every prime $p$ has $\tot(p - 1)$ primitive roots.
  \end{theorem}
  
  \begin{proof}
    Theorem 2 says that each of the integers
    
    \begin{equation}
      1, 2, \dots, p - 1
      \label{eq:A20BD758-1D7B-441E-9E7C-8E7D3DF3D1CC}
    \end{equation}
    
    has an order that is a divisor of $p - 1$. For each divisor $t$ of $p - 1$, let
    $\psi(t)$ denote the number of integers in (\ref{eq:A20BD758-1D7B-441E-9E7C-8E7D3DF3D1CC})
    that have order $t$. Restating what we have just said:
    
    \[ \sum_{t \divides p - 1} \psi(t) = p - 1 \]
    
    From Theorem 4 of Section 9, we have
    
    \begin{equation}
      \sum_{t \divides p - 1} \psi(t) = \sum_{t \divides p - 1} \tot(t)
      \label{eq:E0ADB735-0A98-4252-8D5C-0CCFC3922D5C}
    \end{equation}
    
    If we can show that $\psi(t) \leq \tot(t)$ for each $t$, it will follow from
    (\ref{eq:E0ADB735-0A98-4252-8D5C-0CCFC3922D5C}) that $\psi(t) = \tot(t)$
    for each $t$. In particular, the number of primitive roots of $p$ will be
    $\psi(p - 1) = \tot(p - 1)$.
    
    Choose some $t$. If $\psi(t) = 0$, then $\psi(t) < \tot(t)$ and we are done.
    If $\psi(t) \neq 0$, then there is an integer with order $t$; call it $a$.
    The congruence
    
    \begin{equation}
      x^t \equiv 1 \pmod{p}
    \end{equation}
    
    has, according to Lemma 3, exactly $t$ solutions. Furthermore, (4) is
    satisfied by the $t$ integers
    
    \begin{equation}
      a, a^2, a^3, \dots, a^t
    \end{equation}
    
    Why is this so? Note that $a$ has order $t$, so $a, a^2, a^3, \dots, a^{t-1}$
    cannot be congruent to 1. And because $a^t$ is congruent to 1, $a^{t + 1} \equiv a^ta \equiv a \pmod{p}$
    so the cycle will repeat again. Also note that no two of the numbers in (5)
    have the same least residue (mod $p$), because else the sequence will have
    repetition and it won't ever be congruent to 1.
    
    From Lemma 1, the numbers in (5) that have order $t$ are those powers $a^k$
    with $(k, t) = 1$. But there are $\tot(t)$ such numbers $k$. Hence $\psi(t) = \tot(t)$
    in this case. As noted above, this completes the proof.
  \end{proof}
  
  \begin{corollary}
    If $p$ is a prime and $t \divides (p - 1)$, then the number of least residues
    (mod $p$) with order $t$ is $\tot(t)$.
  \end{corollary}
  
  \begin{proof}
    This follows from $\psi(t) = \tot(t)$ on the previous proof.
  \end{proof}
  
  \begin{theorem}[Wilson's Theorem, alternate proof] If $p$ is a prime,
  $(p - 1)! \equiv -1 \pmod{p}$.
  \end{theorem}
  
  \begin{proof}
    The case $p = 2$ can be confirmed by calculation. Now let $g$ be a primitive
    root of the odd prime $p$. From Theorem 5, we know that
    the lest residues (mod $p$) of $g, g^2, \dots, g^{p - 1}$ are a permutation of $1,
    2, \dots, p - 1$. Multiplying and using the fact that
    
    \[ 1 + 2 + 3 + \dots + (p - 1) = (p - 1)p/2, \]
    
    we get
    
    \[ 1 \cdot 2 \cdots (p - 1) \equiv g \cdot g^2 \cdots g^{p - 1} \pmod{p} \]
    
    or
    
    \[ (p - 1)! \equiv (g^p)^{(p - 1)/2} \equiv g^{(p - 1)/2} \pmod{p}. \]
    
    But $g^{(p - 1)/2}$ satisfies $x^2 \equiv 1 \pmod{p}$, and we know that
    $g^{(p - 1)/2} \equiv 1$ or -1 (mod $p$). But the first case is impossible,
    since $g$ is a primitive root of $p$. Thus $(p - 1)! \equiv -1\pmod{p}$.
  \end{proof}
  
\end{document}






